"use strict";(globalThis.webpackChunkbeacon_docs=globalThis.webpackChunkbeacon_docs||[]).push([[5327],{7210:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"post-mortem-5","title":"Postmortem Incident 5","description":"Date: 2025-05-15","source":"@site/docs/post-mortem-5.md","sourceDirName":".","slug":"/post-mortem-5","permalink":"/post-mortem-5","draft":false,"unlisted":false,"editUrl":"https://github.com/airgap-it/beacon-docs/edit/main/src/docs/post-mortem-5.md","tags":[],"version":"current","frontMatter":{"title":"Postmortem Incident 5","slug":"/post-mortem-5"},"sidebar":"docs","previous":{"title":"Postmortem Incident 4","permalink":"/post-mortem-4"}}');var i=t(74848),r=t(28453);const o={title:"Postmortem Incident 5",slug:"/post-mortem-5"},c=void 0,l={},d=[{value:"Conclusion",id:"conclusion",level:2},{value:"Learnings",id:"learnings",level:2},{value:"Timeline",id:"timeline",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Date:"})," 2025-05-15"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Authors:"})," Isacco Sordo"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Status:"})," Complete, action items in progress"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Summary:"}),"\nAn improper restart of the node ",(0,i.jsx)(n.code,{children:"beacon-node-1.beacon-server-1.papers.tech"})," caused partial operational failure of the Synapse instance, resulting in connectivity issues for US-based users."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Impact:"}),"\nUS-based users experienced connectivity disruptions due to always being routed to a faulty node. This issue caused intermittent network failures and degraded performance."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Root Causes:"}),"\nThe incident originated from an improper restart of the node ",(0,i.jsx)(n.code,{children:"beacon-node-1.beacon-server-1.papers.tech"}),". The following factors contributed to the incident's severity:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improper Node Restart:"})," The node was improperly restarted, causing it to enter a partially operational state rather than fully operational."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Faulty Node Selection Algorithm:"})," The SDK's algorithm for selecting the node with the lowest latency was flawed, leading US users to repeatedly connect to the malfunctioning node."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Affected Systems:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Synapse Instance:"})," Partial operational failure impacting user connectivity."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SDK Network Node Selection:"})," Users relying on SDK for optimal node selection were persistently directed to the faulty node."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Resolution:"}),"\nImmediate corrective steps involved:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Node Restart:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Properly restarted the node to restore complete operational status."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Algorithm Update:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Initiated modifications to the node-selection algorithm, changing its strategy from sequential latency checks to parallel checks."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Enhanced Monitoring:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implemented monitoring checks on the Synapse instance."}),"\n",(0,i.jsx)(n.li,{children:"Adjusted monitoring intervals to every 10 minutes for proactive detection."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Detection:"}),"\nThe issue was initially identified by SDK users who reported connectivity issues. Monitoring systems subsequently validated the Synapse instance's degraded performance."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Action Items:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Action Item"}),(0,i.jsx)(n.th,{children:"Owner"}),(0,i.jsx)(n.th,{children:"State"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Update node selection algorithm for parallel latency detection"}),(0,i.jsx)(n.td,{children:"Isacco"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://github.com/airgap-it/beacon-sdk/releases/tag/v4.6.0",children:"COMPLETE"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Configure monitoring to trigger pager duty incidents repeatedly every 10 minutes"}),(0,i.jsx)(n.td,{children:"Lukas"}),(0,i.jsx)(n.td,{children:"COMPLETE"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Integrate Synapse instance monitoring"}),(0,i.jsx)(n.td,{children:"Lukas"}),(0,i.jsx)(n.td,{children:"COMPLETE"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(n.p,{children:"This incident highlighted two critical issues: the necessity for proper procedures when restarting nodes and robust node selection algorithms. By addressing these factors, future connectivity disruptions can be significantly reduced or avoided entirely."}),"\n",(0,i.jsx)(n.h2,{id:"learnings",children:"Learnings"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parallelization in Node Selection:"}),"\nImplementing parallel node latency checks ensures faster, more reliable network selection, minimizing the impact of node-specific outages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recurring pager duty alerts:"})," The event was unnoticed because the initial trigger was expected due to the maintenace restart but the resulting downtime was not noticed caused by this. Recurring pager duty calls in case of service interruption will avoid this scenario in the future."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"timeline",children:"Timeline"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"08:56 - Node restart due to maintenance"}),"\n",(0,i.jsx)(n.li,{children:"08:57 - Pager Duty call dismissed as expected due to restart"}),"\n",(0,i.jsx)(n.li,{children:"08:58 - Node uptime check (Synapse): beacon-node-1.beacon-server-1.papers.tech returns 200 OK"}),"\n",(0,i.jsx)(n.li,{children:"20:47 - Kukai Team notifies beacon team in slack about an increase in user reports"}),"\n",(0,i.jsx)(n.li,{children:"00:16 - Kukai Team notices the Matrix part of the node is not working properly"}),"\n",(0,i.jsx)(n.li,{children:"08:00 - Service recovered"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);