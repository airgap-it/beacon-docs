"use strict";(globalThis.webpackChunkbeacon_docs=globalThis.webpackChunkbeacon_docs||[]).push([[9214],{644:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"guides/disconnecting-a-wallet","title":"Disconnecting from a Wallet","description":"This section explains all the available ways to disconnect a dApp in Beacon.","source":"@site/docs/guides/disconnecting-a-wallet.mdx","sourceDirName":"guides","slug":"/guides/disconnecting-a-wallet","permalink":"/guides/disconnecting-a-wallet","draft":false,"unlisted":false,"editUrl":"https://github.com/airgap-it/beacon-docs/edit/main/src/docs/guides/disconnecting-a-wallet.mdx","tags":[],"version":"current","frontMatter":{"title":"Disconnecting from a Wallet"},"sidebar":"docs","previous":{"title":"Active Account","permalink":"/guides/active-account"},"next":{"title":"Network","permalink":"/guides/network"}}');var o=t(74848),r=t(28453),l=t(11470),c=t(19365);const s={title:"Disconnecting from a Wallet"},i=void 0,u={},d=[{value:"Disconnect",id:"disconnect",level:2},{value:"Errors",id:"errors",level:3},{value:"ClearActiveAccount",id:"clearactiveaccount",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"This section explains all the available ways to disconnect a dApp in Beacon."}),"\n",(0,o.jsx)(n.h2,{id:"disconnect",children:"Disconnect"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"disconnect"})," will only work while connected to a wallet, otherwise appropriate errors are thrown.\nIt clears all transport references ensuring a clean and complete disconnection from the wallet."]}),"\n",(0,o.jsx)(n.h3,{id:"errors",children:"Errors"}),"\n",(0,o.jsxs)(n.p,{children:["Namely there are 3 errors that ",(0,o.jsx)(n.code,{children:"disconnect"})," can throw which are:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'"Syncing stopped manually."'}),": This happens while disconnecting a P2P connection"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'"No transport available."'}),": This happens when the transport hasn't resolved yet (likely because your dApp is not connected yet to a wallet)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'"Not connected."'}),": This error is thrown to prevent dApps from disconnecting multiple times."]}),"\n"]}),"\n","\n",(0,o.jsxs)(l.A,{groupId:"beaconOrTaquitoDAW2",defaultValue:"beacon",values:[{label:"Beacon",value:"beacon"},{label:"Taquito",value:"taquito"}],children:[(0,o.jsx)(c.A,{value:"beacon",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"live",live:!0,children:'// beacon disconnect wallet 2\nimport { DAppClient } from "@airgap/beacon-sdk";\nconst dAppClient = new DAppClient({ name: "Beacon Docs" });\n\ndAppClient\n  .disconnect()\n  .then(() => {\n    console.log("Disconnected.");\n  })\n  .catch((err) => console.error(err.message));\n'})})}),(0,o.jsx)(c.A,{value:"taquito",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"live",live:!0,children:'// taquito disconnect wallet 2\nimport { TezosToolkit } from "@taquito/taquito";\nimport { BeaconWallet } from "@taquito/beacon-wallet";\nimport Logger from "../Logger";\nconst Tezos = new TezosToolkit("https://mainnet.api.tez.ie");\nconst wallet = new BeaconWallet({ name: "Beacon Docs Taquito" });\n\nTezos.setWalletProvider(wallet);\n\ntry {\n  await wallet.client.disconnect();\n} catch (err: any) {\n  logger.log("Error: ", err.message);\n}\n'})})})]}),"\n",(0,o.jsx)(n.h2,{id:"clearactiveaccount",children:"ClearActiveAccount"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"clearActiveAccount"})," manages the process of clearing the currently active account and only its associated active transport.\nThis method ensures that all data linked to the active account is removed, and the active transport connection is terminated."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"clearActiveAccount"})," gets also invoked when calling:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"removeAccount"}),": if the argument ",(0,o.jsx)(n.code,{children:"accountIdentifier"})," matches the active account"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"removeAllAccounts"}),": always"]}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Note: Only for WalletConnect, ",(0,o.jsx)(n.code,{children:"clearActiveAccount"})," will also resets all transport references behaving similarly to ",(0,o.jsx)(n.code,{children:"disconnect"})]}),"\n"]}),"\n",(0,o.jsxs)(l.A,{groupId:"beaconOrTaquitoDAW2",defaultValue:"beacon",values:[{label:"Beacon",value:"beacon"},{label:"Taquito",value:"taquito"}],children:[(0,o.jsx)(c.A,{value:"beacon",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"live",live:!0,children:'// beacon disconnect wallet\nimport { DAppClient } from "@airgap/beacon-sdk";\nconst dAppClient = new DAppClient({ name: "Beacon Docs" });\n\ndAppClient\n  .clearActiveAccount()\n  .then(() => {\n    const account = await dAppClient.getActiveAccount();\n    console.log("Active Account", account);\n  })\n  .catch((err) => console.error(err.message));\n'})})}),(0,o.jsx)(c.A,{value:"taquito",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:"live",live:!0,children:'// taquito disconnect wallet\nimport { TezosToolkit } from "@taquito/taquito";\nimport { BeaconWallet } from "@taquito/beacon-wallet";\n\nconst Tezos = new TezosToolkit("https://mainnet.api.tez.ie");\nconst wallet = new BeaconWallet({ name: "Beacon Docs Taquito" });\n\nTezos.setWalletProvider(wallet);\n\nawait wallet.clearActiveAccount();\n\ntry {\n  const account = await wallet.getPKH();\n  console.log("Active Account", account);\n} catch {\n  console.log("No wallet connected");\n}\n'})})})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},11470:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(96540),o=t(34164),r=t(17559),l=t(23104),c=t(56347),s=t(205),i=t(57485),u=t(31682),d=t(70679);function h(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}(t);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function v({queryString:e=!1,groupId:n}){const t=(0,c.W6)(),o=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,i.aZ)(o),(0,a.useCallback)(e=>{if(!o)return;const n=new URLSearchParams(t.location.search);n.set(o,e),t.replace({...t.location,search:n.toString()})},[o,t])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:o}=e,r=p(e),[l,c]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r})),[i,u]=v({queryString:t,groupId:o}),[h,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,o]=(0,d.Dv)(n);return[t,(0,a.useCallback)(e=>{n&&o.set(e)},[n,o])]}({groupId:o}),g=(()=>{const e=i??h;return m({value:e,tabValues:r})?e:null})();(0,s.A)(()=>{g&&c(g)},[g]);return{selectedValue:l,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),b(e)},[u,b,r]),tabValues:r}}var g=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var w=t(74848);function x({className:e,block:n,selectedValue:t,selectValue:a,tabValues:r}){const c=[],{blockElementScrollPositionUntilNextRender:s}=(0,l.a_)(),i=e=>{const n=e.currentTarget,o=c.indexOf(n),l=r[o].value;l!==t&&(s(n),a(l))},u=e=>{let n=null;switch(e.key){case"Enter":i(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,w.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:a})=>(0,w.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{c.push(e)},onKeyDown:u,onClick:i,...a,className:(0,o.A)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function A({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===t);return e?(0,a.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,w.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function j(e){const n=b(e);return(0,w.jsxs)("div",{className:(0,o.A)(r.G.tabs.container,"tabs-container",f.tabList),children:[(0,w.jsx)(x,{...n,...e}),(0,w.jsx)(A,{...n,...e})]})}function y(e){const n=(0,g.A)();return(0,w.jsx)(j,{...e,children:h(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>l});t(96540);var a=t(34164);const o={tabItem:"tabItem_Ymn6"};var r=t(74848);function l({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(o.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var a=t(96540);const o={},r=a.createContext(o);function l(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);