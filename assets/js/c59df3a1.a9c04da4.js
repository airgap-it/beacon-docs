"use strict";(globalThis.webpackChunkbeacon_docs=globalThis.webpackChunkbeacon_docs||[]).push([[3615],{1470:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/ssr","title":"Integrate Beacon SDK with Next.js (SSR)","description":"This guide is valid only for version 4.5.0 and later.","source":"@site/docs/guides/ssr.mdx","sourceDirName":"guides","slug":"/guides/ssr","permalink":"/guides/ssr","draft":false,"unlisted":false,"editUrl":"https://github.com/airgap-it/beacon-docs/edit/main/src/docs/guides/ssr.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Migration Guide: Updating to Event Subscription","permalink":"/guides/migration-guide"},"next":{"title":"Failed to Connect to Relayer error","permalink":"/guides/failed-to-connect"}}');var s=t(74848),o=t(28453);const r={},a="Integrate Beacon SDK with Next.js (SSR)",l={},d=[{value:"1. Install Dependencies",id:"1-install-dependencies",level:2},{value:"2. Configure Next.js for Beacon SDK",id:"2-configure-nextjs-for-beacon-sdk",level:2},{value:"3. Create or Update Your Page",id:"3-create-or-update-your-page",level:2},{value:"4. Running Your Project",id:"4-running-your-project",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"integrate-beacon-sdk-with-nextjs-ssr",children:"Integrate Beacon SDK with Next.js (SSR)"})}),"\n",(0,s.jsx)(n.admonition,{title:"Version Requirement",type:"warning",children:(0,s.jsx)(n.p,{children:"This guide is valid only for version 4.5.0 and later."})}),"\n",(0,s.jsx)(n.p,{children:"In this guide, you'll learn how to integrate Beacon SDK into your Next.js project."}),"\n",(0,s.jsx)(n.p,{children:"We assume that you already have a basic Next.js setup."}),"\n",(0,s.jsx)(n.p,{children:"We'll show you how to configure the project for SSR and add a simple page that uses Beacon SDK to request permissions."}),"\n",(0,s.jsx)(n.h2,{id:"1-install-dependencies",children:"1. Install Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"First, ensure you have installed the Beacon SDK:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @airgap/beacon-sdk\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Additionally, if you haven't already, install ",(0,s.jsx)(n.code,{children:"webpack-node-externals"})," which is used in the Next.js configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install webpack-node-externals\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-configure-nextjs-for-beacon-sdk",children:"2. Configure Next.js for Beacon SDK"}),"\n",(0,s.jsxs)(n.p,{children:["Update your ",(0,s.jsx)(n.code,{children:"next.config.js"})," file to modify the webpack configuration. This ensures that certain Node modules are excluded during the server build, and provides fallbacks for browser environments."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// next.config.js\n\n/** @type {import(\'next\').NextConfig} */\nconst nodeExternals = require("webpack-node-externals");\n\nconst nextConfig = {\n  reactStrictMode: false,\n};\n\nmodule.exports = {\n  ...nextConfig,\n  webpack: (\n    config,\n    { buildId, dev, isServer, defaultLoaders, nextRuntime, webpack },\n  ) => {\n    // Modify the config only for the server-side build.\n    if (isServer) {\n      config.externals.push({\n        bufferutil: "bufferutil",\n        "utf-8-validate": "utf-8-validate",\n        encoding: "encoding",\n        "pino-pretty": "pino-pretty",\n      });\n    }\n    // Provide a fallback for the "fs" module (not available in browsers).\n    config.resolve.fallback = { fs: false };\n    return config;\n  },\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"3-create-or-update-your-page",children:"3. Create or Update Your Page"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new page (or update an existing one, e.g. ",(0,s.jsx)(n.code,{children:"page.tsx"}),") with the following code.\nThis code sets up a Beacon SDK client and adds a button that, when clicked, requests permissions."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// page.tsx\n\n"use client";\nimport { DAppClient, NetworkType } from "@airgap/beacon-sdk";\nimport { useEffect, useState } from "react";\n\nexport default function Home() {\n  const [client, setClient] = useState<DAppClient>();\n\n  useEffect(() => {\n    // Initialize the Beacon SDK DAppClient with a name and network type.\n    setClient(\n      new DAppClient({\n        name: "test",\n        network: { type: NetworkType.GHOSTNET },\n      }),\n    );\n  }, []);\n\n  return (\n    <main>\n      <h1>Hello World</h1>\n      <button\n        onClick={() => client?.requestPermissions()}\n        style={{\n          color: "black",\n          backgroundColor: "white",\n          padding: "5px",\n          borderRadius: "5px",\n        }}\n      >\n        Request Permissions\n      </button>\n    </main>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"4-running-your-project",children:"4. Running Your Project"}),"\n",(0,s.jsx)(n.p,{children:"After updating the configuration and page, run your Next.js development server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Open your browser and navigate to the page you modified (e.g., ",(0,s.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"}),').\nYou should see a "Hello World" message with a button labeled "Request Permissions."']}),"\n",(0,s.jsx)(n.p,{children:"Clicking the button will invoke Beacon SDK's permission request."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);